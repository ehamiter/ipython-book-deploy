<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <link rel="preconnect" href="https://www.w3counter.com/">
        <script src="https://www.w3counter.com/tracker.js?id=135172"></script>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>IPython for Web Devs</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="The book IPython for Web Devs will help you learn more about IPython, a rich toolkit that helps you make the most out of using Python interactively.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="ipython-for-web-devs.html">IPython for Web Devs</a></li><li class="chapter-item expanded affix "><a href="about-the-author.html">About the author</a></li><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="why-bother.html"><strong aria-hidden="true">2.</strong> Why bother?</a></li><li class="chapter-item expanded "><a href="audience.html"><strong aria-hidden="true">3.</strong> Who this book is for</a></li><li class="chapter-item expanded "><a href="how.html"><strong aria-hidden="true">4.</strong> How to read this book</a></li><li class="chapter-item expanded "><a href="not-free.html"><strong aria-hidden="true">5.</strong> This book is not free</a></li><li class="chapter-item expanded "><a href="prerequisites.html"><strong aria-hidden="true">6.</strong> Prerequisites</a></li><li class="chapter-item expanded "><a href="setup.html"><strong aria-hidden="true">7.</strong> Setup</a></li><li class="chapter-item expanded "><a href="profiles.html"><strong aria-hidden="true">8.</strong> Profiles</a></li><li class="chapter-item expanded "><a href="ipython-config.html"><strong aria-hidden="true">9.</strong> ipython_config.py</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="config/autoformatter.html"><strong aria-hidden="true">9.1.</strong> autoformatter</a></li><li class="chapter-item expanded "><a href="config/autorestore.html"><strong aria-hidden="true">9.2.</strong> autorestore</a></li><li class="chapter-item expanded "><a href="config/banner1.html"><strong aria-hidden="true">9.3.</strong> banner1</a></li><li class="chapter-item expanded "><a href="config/colors.html"><strong aria-hidden="true">9.4.</strong> colors</a></li><li class="chapter-item expanded "><a href="config/confirm_exit.html"><strong aria-hidden="true">9.5.</strong> confirm_exit</a></li><li class="chapter-item expanded "><a href="config/editor.html"><strong aria-hidden="true">9.6.</strong> editor</a></li><li class="chapter-item expanded "><a href="config/exec_lines.html"><strong aria-hidden="true">9.7.</strong> exec_lines</a></li><li class="chapter-item expanded "><a href="config/highlighting_style.html"><strong aria-hidden="true">9.8.</strong> highlighting_style</a></li><li class="chapter-item expanded "><a href="config/pdb.html"><strong aria-hidden="true">9.9.</strong> pdb</a></li></ol></li><li class="chapter-item expanded "><a href="magic-commands.html"><strong aria-hidden="true">10.</strong> Magic commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="magic/aimport.html"><strong aria-hidden="true">10.1.</strong> aimport</a></li><li class="chapter-item expanded "><a href="magic/autoreload.html"><strong aria-hidden="true">10.2.</strong> autoreload</a></li><li class="chapter-item expanded "><a href="magic/bookmark.html"><strong aria-hidden="true">10.3.</strong> bookmark</a></li><li class="chapter-item expanded "><a href="magic/cpaste.html"><strong aria-hidden="true">10.4.</strong> cpaste</a></li><li class="chapter-item expanded "><a href="magic/debug.html"><strong aria-hidden="true">10.5.</strong> debug</a></li><li class="chapter-item expanded "><a href="magic/doctest_mode.html"><strong aria-hidden="true">10.6.</strong> doctest_mode</a></li><li class="chapter-item expanded "><a href="magic/edit.html"><strong aria-hidden="true">10.7.</strong> edit</a></li><li class="chapter-item expanded "><a href="magic/env.html"><strong aria-hidden="true">10.8.</strong> env</a></li><li class="chapter-item expanded "><a href="magic/history.html"><strong aria-hidden="true">10.9.</strong> history</a></li><li class="chapter-item expanded "><a href="magic/load.html"><strong aria-hidden="true">10.10.</strong> load</a></li><li class="chapter-item expanded "><a href="magic/lsmagic.html"><strong aria-hidden="true">10.11.</strong> lsmagic</a></li><li class="chapter-item expanded "><a href="magic/macro.html"><strong aria-hidden="true">10.12.</strong> macro</a></li><li class="chapter-item expanded "><a href="magic/magic.html"><strong aria-hidden="true">10.13.</strong> magic</a></li><li class="chapter-item expanded "><a href="magic/notebook.html"><strong aria-hidden="true">10.14.</strong> notebook</a></li><li class="chapter-item expanded "><a href="magic/paste.html"><strong aria-hidden="true">10.15.</strong> paste</a></li><li class="chapter-item expanded "><a href="magic/pastebin.html"><strong aria-hidden="true">10.16.</strong> pastebin</a></li><li class="chapter-item expanded "><a href="magic/pdb.html"><strong aria-hidden="true">10.17.</strong> pdb</a></li><li class="chapter-item expanded "><a href="magic/pdef.html"><strong aria-hidden="true">10.18.</strong> pdef</a></li><li class="chapter-item expanded "><a href="magic/pdoc.html"><strong aria-hidden="true">10.19.</strong> pdoc</a></li><li class="chapter-item expanded "><a href="magic/pinfo.html"><strong aria-hidden="true">10.20.</strong> pinfo</a></li><li class="chapter-item expanded "><a href="magic/pinfo2.html"><strong aria-hidden="true">10.21.</strong> pinfo2</a></li><li class="chapter-item expanded "><a href="magic/pprint.html"><strong aria-hidden="true">10.22.</strong> pprint</a></li><li class="chapter-item expanded "><a href="magic/psearch.html"><strong aria-hidden="true">10.23.</strong> psearch</a></li><li class="chapter-item expanded "><a href="magic/pycat.html"><strong aria-hidden="true">10.24.</strong> pycat</a></li><li class="chapter-item expanded "><a href="magic/quickref.html"><strong aria-hidden="true">10.25.</strong> quickref</a></li><li class="chapter-item expanded "><a href="magic/recall.html"><strong aria-hidden="true">10.26.</strong> recall</a></li><li class="chapter-item expanded "><a href="magic/rerun.html"><strong aria-hidden="true">10.27.</strong> rerun</a></li><li class="chapter-item expanded "><a href="magic/reset.html"><strong aria-hidden="true">10.28.</strong> reset</a></li><li class="chapter-item expanded "><a href="magic/save.html"><strong aria-hidden="true">10.29.</strong> save</a></li><li class="chapter-item expanded "><a href="magic/script.html"><strong aria-hidden="true">10.30.</strong> script</a></li><li class="chapter-item expanded "><a href="magic/store.html"><strong aria-hidden="true">10.31.</strong> store</a></li><li class="chapter-item expanded "><a href="magic/system.html"><strong aria-hidden="true">10.32.</strong> system</a></li><li class="chapter-item expanded "><a href="magic/tb.html"><strong aria-hidden="true">10.33.</strong> tb</a></li><li class="chapter-item expanded "><a href="magic/timeit.html"><strong aria-hidden="true">10.34.</strong> timeit</a></li><li class="chapter-item expanded "><a href="magic/who.html"><strong aria-hidden="true">10.35.</strong> who</a></li><li class="chapter-item expanded "><a href="magic/whos.html"><strong aria-hidden="true">10.36.</strong> whos</a></li><li class="chapter-item expanded "><a href="magic/xdel.html"><strong aria-hidden="true">10.37.</strong> xdel</a></li><li class="chapter-item expanded "><a href="magic/xmode.html"><strong aria-hidden="true">10.38.</strong> xmode</a></li></ol></li><li class="chapter-item expanded "><a href="colophon.html">Colophon</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <!-- Make the book title only appear if it is *not* the chapter title as well -->
                    <h1 id="book-title" class="menu-title">IPython for Web Devs</h1>
                    <script type="text/javascript">
                        var bookTitleElement = document.getElementById('book-title')
                        var bookTitle = 'IPython for Web Devs';
                        var chapterTitle = '';
                        if (bookTitle === chapterTitle) {
                            bookTitleElement.innerText = null;
                            document.title = bookTitle;
                        }
                    </script>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/ehamiter/ipython-book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <div class="cover-huge">IPython for Web Devs</div>
<div class="centered">
    <img src="theme/cover-snake.png" alt="Picture of a snake" width="450" height="450">
</div>
<div class="cover-medium">by Eric Hamiter</div>
<div class="cover-small">&copy; 2020</div>
<h1><a class="header" href="#about-the-author" id="about-the-author">About the author</a></h1>
<p><a href="https://erichamiter.com">Eric Hamiter</a> is a software engineer that has been involved with the open source community for over a decade. Among some of his notable contributions have been the Firefox extension <a href="https://en.wikipedia.org/wiki/BugMeNot">BugMeNot</a> and the Sublime Text package <a href="https://packagecontrol.io/packages/GitHubinator">GitHubinator</a>.</p>
<p>Previously, he served in the United States Navy as a <a href="https://www.public.navy.mil/bupers-npc/enlisted/community/crypto_it/Pages/CTI.aspx">Cryptologic Technician - Interpretive (CTI)</a>. He lives in Nashville, Tennessee with his wife and two sons, and enjoys traveling, scuba diving, cooking, and writing about himself in the third person.</p>
<h1><a class="header" href="#introduction" id="introduction">Introduction</a></h1>
<p>Per the first blurb on <a href="https://ipython.org/">IPython’s web page</a>, it is described as a rich architecture for interactive computing with:</p>
<blockquote>
<p>A kernel for <a href="https://jupyter.org/">Jupyter</a>.<br />
Support for interactive data visualization and use of <a href="https://ipython.org/ipython-doc/stable/interactive/reference.html#gui-event-loop-support">GUI toolkits</a>.<br />
Flexible, <a href="https://ipython.org/ipython-doc/stable/interactive/reference.html#embedding-ipython">embeddable interpreters</a> to load into your own projects.<br />
Easy to use, high performance tools for <a href="https://ipyparallel.readthedocs.io/en/latest/">parallel computing</a>.</p>
</blockquote>
<p>You can see that IPython has a veritable treasure trove of very powerful features. This book won’t be covering <em>any</em> of those.</p>
<p>Instead, we are going to explore the interactive shell via the command line that one would typically use in conjunction with Python web development, typically when working with a Django / Flask / Tornado / other Python web framework.</p>
<p>We are not going to cover every single feature that is available. We are going to concentrate on the ones that I feel will give you a significant boost in efficiency and usefulness. I encourage you to explore the official documentation in depth.</p>
<p>As far as specific versions go, this book will cover what is current at the time of writing, which is Python 3.9.0 and IPython 7.19.0.</p>
<h1><a class="header" href="#why-bother" id="why-bother">Why bother?</a></h1>
<blockquote>
<p>What’s the point of using IPython if it’s not going to be using the Jupyter notebook?</p>
</blockquote>
<p>Excellent question. While the <a href="https://ipython.org/notebook.html">Jupyter notebook</a> is a wonderful tool, sometimes it can be overkill. At times, all I want is to quickly pop into a shell, grab an object, and do a little manipulation or testing.</p>
<blockquote>
<p>What’s wrong with just using <code>python</code> to open a shell?</p>
</blockquote>
<p>Another wonderful question. You’re really good at this. The answer is that there is <em>nothing</em> wrong with using the standard Python shell, but the reason to give IPython a try is that you get a lot of things for free. Among some of these features are:</p>
<ul>
<li>Persistent input history</li>
<li>Tab completion</li>
<li>Extensible system of “magic” commands</li>
<li>A rich configuration system</li>
<li>Syntax highlighting as you type</li>
<li>Integration with a command line editor</li>
</ul>
<p>…and much, much more.</p>
<h1><a class="header" href="#who-this-book-is-for" id="who-this-book-is-for">Who this book is for</a></h1>
<p>This is not a “learn how to program” book, nor is it geared toward data visualization or high performance processing that many may use Jupyter for. The audience in question are Python software developers who are comfortable with <a href="https://en.wikipedia.org/wiki/Object-oriented_programming">object-oriented programming</a> in a command line environment.</p>
<p>If you’re a Django or Flask developer that will run <code>python manage.py shell</code> or <code>flask shell</code> in order to examine objects and test out bits of code, you’re in the right place. This should look familiar to you:</p>
<pre><code class="language-python">&gt;&gt;&gt; u = User.objects.filter(email__icontains='dev')

&gt;&gt;&gt; len(u)
14

&gt;&gt;&gt; first_dev = u[0]

&gt;&gt;&gt; first_dev.is_staff
True

&gt;&gt;&gt; first_dev.username
'samanthasmithdev'

&gt;&gt;&gt; first_dev.email
'samanthasmithdev@techiecompany.com'
</code></pre>
<p>If this leaves you slightly befuddled, the rest may be a bit hard to follow. You can learn more about <a href="https://www.python.org/about/gettingstarted/">Python and the shell here</a>.</p>
<h1><a class="header" href="#how-to-read-this-book" id="how-to-read-this-book">How to read this book</a></h1>
<p>This book was generated using a Rust program called <a href="https://github.com/rust-lang/mdBook">mdBook</a> that has several goodies baked in. It handles the layout and responsive design so my focus can lie on the content of this book instead of the architecture of the site. I also use footnotes from time to time. <sup class="footnote-reference"><a href="how.html#fn1" id="ref1">1</a></sup></p>
<p>As far as the features go, you can:</p>
<p>…toggle the chapter menu by clicking on the hamburger menu: <i class="fa fa-fw fa-bars"></i></p>
<p>…change the theme by selecting the paintbrush icon: <i class="fa fa-fw fa-paint-brush"></i></p>
<p>…search the book using the magnifying glass: <i class="fa fa-fw fa-search"></i></p>
<p>…turn pages by clicking the left and right angles:<i class="fa fa-fw fa-angle-left"></i> <i class="fa fa-fw fa-angle-right"></i></p>
<p>You can also navigate by using your keyboard’s left and right arrows.</p>
<p>On the top right of the page, you can either print <i class="fa fa-fw fa-print"></i> this book in its entirety or visit its Github <i class="fa fa-fw fa-github"></i> repository, where the source code lives.</p>
<p>A warning symbol will appear by a section that has potentially tricky parts that require close attention:</p>
<blockquote>
<p><i class="fa fa-fw fa-warning"></i> Don’t run on wet tiled surfaces.</p>
</blockquote>
<p>For code snippets, you can copy the input by clicking on the copy symbol:</p>
<pre><code class="language-python">ipython --version
</code></pre>
<p>Output from shell commands is represented in a color-inverted block:</p>
<pre class="output">
7.19.0
</pre>
<hr />
<p><sup class="footnote-definition" id="fn1">1. Like this one.<a href="how.html#ref1" title="Jump back to footnote 1 in the text.">↩</a></sup></p>
<h1><a class="header" href="#this-book-is-not-free" id="this-book-is-not-free">This book is not free</a></h1>
<p>Well… it’s free as in freedom, but not free as in beer. Although you don’t necessarily have to spend money to buy it.</p>
<p><em>Huh?</em></p>
<p>You are most welcome (and encouraged) to buy me a coffee / beer / pizza to show your appreciation if you enjoy this book and you get something out of it— you learn some new tricks, speed up your efficiency, save your company tens of millions of dollars, and so forth. You can do that by clicking below:</p>
<div class="centered">
    <a href="https://buymeacoffee.com/ehamiter" alt="Donation link to buymeacoffee.com" title="Help the cause, and donate some caffeine!" target="_blank">Support IPython for Web Devs and buy me a coffee!</a>
</div>
<p>This will not unlock special features of this book, or remove ads, because there are no features to unlock, and no ads to remove. You get the goods up front, and beyond this page, I won’t solicit you any further. If you finish the entire book, and learned some cool things, or especially if you find yourself returning here repeatedly for reference, I ask you to please consider being a supporter.</p>
<p>If you’re strapped for cash, waiting for your Bitcoins to mature, spent all your money investing in a llama farm, et cetera— you can make this book better. I’m a big believer in open source software, and this book is no different. Spot a <strike>tpyo</strike> typo? See something grievously wrong? Want to clarify an example? Make a pull request, and improve the quality for the next person who reads this book. Click the GitHub icon <i class="fa fa-github"></i> on the top right of the page to visit the repo. There are instructions on that page for getting everything set up for you locally.</p>
<p>If you don’t want to part with your hard-earned money, and have no desire to improve the content via pull requests, then tell someone about it. Mention this book to a friend, colleague, or enemy. Post a link to a forum you frequently visit. Tweet a link to it. The more people that see it, the better— for everyone. More eyes on the content ensures mistakes are caught, wrongs are righted, and knowledge is shared. Python programming efficiency soars, the global economy recovers, and cats and dogs live together in harmony.</p>
<h1><a class="header" href="#prerequisites" id="prerequisites">Prerequisites</a></h1>
<ul>
<li>You are a curious learner, and want to improve your programming skills.</li>
</ul>
<h1><a class="header" href="#setup" id="setup">Setup</a></h1>
<p>Some slight assumptions are going to be made. I presume you own a computer, or at least have access to one. I am also going to assume it is of a Mac, Linux, or Windows variety. A further presumption is that you have Python 3 installed, a terminal program to access it, and the Python package installer,  <code>pip</code>.</p>
<p>If the above is not true, there are a few remedies:</p>
<ul>
<li><a href="https://www.wikihow.com/Buy-a-New-Computer">Buy a computer</a></li>
<li><a href="https://wiki.python.org/moin/BeginnersGuide/Download">Figure out how to install Python</a></li>
<li><a href="https://en.wikipedia.org/wiki/List_of_terminal_emulators">Select and install a terminal program</a></li>
<li><a href="https://pip.pypa.io/en/stable/installing/">Install pip</a></li>
</ul>
<p>I also highly suggest <a href="https://docs.python.org/3/tutorial/venv.html">using a virtual environment</a> so you can keep your global Python installation nice and tidy, and can work in a separate environment that you can play around with and install different Python packages. This is a complex topic by itself, so for the remainder of this book, the assumption is that you are operating in such an environment. I use <a href="https://virtualenv.pypa.io/en/latest/">virtualenv</a> and <a href="https://virtualenvwrapper.readthedocs.io/en/latest/">virtualenvwrapper</a>, but you should use whatever works for you.</p>
<p>Once you are ready, you can install IPython by running:</p>
<pre><code>pip install ipython
</code></pre>
<p>We can test that IPython was successfully installed by entering:</p>
<pre><code>ipython --version
</code></pre>
<pre class="output">
7.19.0
</pre>
<h1><a class="header" href="#profiles" id="profiles">Profiles</a></h1>
<p>IPython has support for multiple profiles. This is handy if you are working on different projects and want to tweak some behaviors, or test out new settings without changing how IPython will behave globally. By default, IPython will always run the <code>default</code> profile. Once you specify a new profile to create, new configuration files will be created. To create a new profile named <code>zagnut</code>, enter: <sup class="footnote-reference"><a href="profiles.html#fn2" id="ref2">2</a></sup></p>
<pre><code>ipython profile create zagnut
</code></pre>
<pre class="output">
[ProfileCreate] Generating default config file: '/Users/eric/.ipython/profile_zagnut/ipython_config.py'
</pre>
<p>If at some point you forget where this configuration file was created, you can <code>locate</code> it:</p>
<pre><code>ipython locate profile zagnut
</code></pre>
<pre class="output">
/Users/eric/.ipython/profile_zagnut
</pre>
<p>To launch IPython with this configuration, pass in the name to the <code>profile</code> argument:</p>
<pre><code>ipython --profile=zagnut
</code></pre>
<pre class="output">
Python 3.9.0 (default, Nov  2 2020, 18:14:37)
Type 'copyright', 'credits' or 'license' for more information
IPython 7.19.0 -- An enhanced Interactive Python. Type '?' for help.

IPython profile: zagnut

In [1]:
</pre>
<p>To exit the shell, you can enter <code>exit</code> or use the keyboard shortcut <code>CTRL-D</code>.</p>
<p>If you are a Django developer and want to use an IPython profile in conjunction with the Django shell, you can do it by using the <code>django-extensions</code> package:</p>
<pre><code>pip install django-extensions
</code></pre>
<p>It has a <a href="https://django-extensions.readthedocs.io/en/latest/shell_plus.html"><code>shell_plus</code></a> extension (which gives you some niceties like auto importing your models), and you can pass the profile name in as:</p>
<pre><code>python manage.py shell_plus --ipython -- --profile=zagnut
</code></pre>
<blockquote>
<p><i class="fa fa-fw fa-warning"></i> Note that there is a separate double dash (<code>--</code>) before the <code>--profile</code>.</p>
</blockquote>
<p>Since this is kind of a long command to type each time you want to pop into a shell, I alias mine to something much simpler to remember: <strong>P</strong>ython <strong>m</strong>anage <strong>s</strong>hell_plus:</p>
<pre><code>alias pms='python manage.py shell_plus --ipython -- --profile=zagnut'
</code></pre>
<hr />
<p><sup class="footnote-definition" id="fn2">2. We all remember <a href="https://www.youtube.com/watch?v=IwV90NvsmAI&amp;t=0m20s">the candy bar of choice for Beetlejuice</a>, right? No? Just me?<a href="profiles.html#ref2" title="Jump back to footnote 2 in the text.">↩</a></sup></p>
<h1><a class="header" href="#ipython_configpy" id="ipython_configpy">ipython_config.py</a></h1>
<p>Once you have created your profile, open up its configuration file in your favorite text editor:</p>
<pre><code>ipython locate profile zagnut
</code></pre>
<pre class="output">
/Users/eric/.ipython/profile_zagnut
</pre>
<pre><code>&quot;${EDITOR:-vi}&quot; ~/.ipython/profile_zagnut/ipython_config.py
</code></pre>
<p>This file is over 1,000 lines of code, so there’s a lot to take in— we’ll focus on a handful of things that are practical and help tailor your IPython experience. After we’ve explored the settings in this chapter, I encourage you to dive deep into the file for other settings. Experiment with logging, interacting with <code>matplotlib</code>, <code>numpy</code>, and <a href="https://jedi.readthedocs.io/en/latest/">Jedi integration</a> if those are in your wheelhouse.</p>
<h1><a class="header" href="#terminalinteractiveshellautoformatter" id="terminalinteractiveshellautoformatter">TerminalInteractiveShell.autoformatter</a></h1>
<pre class="output">
## Autoformatter to reformat Terminal code. Can be `'black'` or `None`
#  Default: None
</pre>
<p><code>black</code> is <a href="https://github.com/psf/black">the uncompromising Python code formatter</a>. It can make collaboration on a project consistent— no matter the style of the coder, <code>black</code> will format the code to its specifications, so everything is nice and tidy.</p>
<pre><code class="language-python">c.TerminalInteractiveShell.autoformatter = 'black'
</code></pre>
<p>Enabling this can turn something like this:</p>
<pre><code class="language-python">In [1]: cost = {
    ...: 'apple': 0.40,
    ...: 'banana': 0.50}
    ...: bought = {
    ...:     'apple': 1,
    ...:     'banana': 6}
    ...: bill = sum(
    ...: cost[fruit] * bought[fruit]
    ...:                    for fruit in bought
    ...:                    )
    ...: print(
    ...: 'I owe the grocer $%.2f' % bill
    ...: )
I owe the grocer $3.40
</code></pre>
<p>…into this:</p>
<pre><code class="language-python">In [1]: cost = {&quot;apple&quot;: 0.40, &quot;banana&quot;: 0.50}
    ...: bought = {&quot;apple&quot;: 1, &quot;banana&quot;: 6}
    ...: bill = sum(cost[fruit] * bought[fruit] for fruit in bought)
    ...: print(&quot;I owe the grocer $%.2f&quot; % bill)
I owe the grocer $3.40
</code></pre>
<p>It’s very handy for cleaning up your code style, especially if the project you’re working on uses <code>black</code>. In order for this to work, you need to have <code>black</code> installed in your environment:</p>
<pre><code>pip install black
</code></pre>
<p>Once caveat that I have found is that if you <em>do</em> set the autoformatter to <code>black</code>, sometimes it will try and format things that aren’t necessarily code if you omit the optional <code>%</code> prefix. To be specific, there is a magic command <a href="config/../magic/history.html"><code>%history</code></a>, or its alias <code>%hist</code>. You use this to list the history of your IPython session’s inputs, and by default it lists them without a corresponding number beside each entry. If you <em>do</em> want to see a numbered list, you need to pass in the parameter <code>n</code>. So, it should look like this:</p>
<pre><code class="language-python">history -n
</code></pre>
<p>…but <code>black</code> reformats that, which turns it into</p>
<pre><code class="language-python">history - n
</code></pre>
<p>…which isn’t an actual command, so you don’t see the numbers beside each line. So, this is something you should be aware of. To be safe, if you have <code>black</code> set to autoformat, try to always use the prefix <code>%</code> so there’s no confusion:</p>
<pre><code class="language-python">%history -n
</code></pre>
<h1><a class="header" href="#autorestore" id="autorestore">autorestore</a></h1>
<pre class="output">
## If True, any %store-d variables will be automatically restored when IPython
#  starts.
#  Default: False
</pre>
<p><code>%store</code> is a “magic” command that we will discuss in just a bit— for the context needed for the <code>autorestore</code> setting, this allows you to store variables, aliases, and macros in IPython’s database during a session, then after exiting that session, having those values be retrieved automatically upon entering a new session.</p>
<pre><code class="language-python">c.StoreMagics.autorestore = True
</code></pre>
<h1><a class="header" href="#interactiveshellappbanner1" id="interactiveshellappbanner1">InteractiveShellApp.banner1</a></h1>
<pre class="output">
## The part of the banner to be printed before the profile
#  Default: "Python 3.9.0 (default, Nov  2 2020, 18:14:37) \nType 'copyright', 'credits' or 'license' for more information\nIPython 7.19.0 -- An enhanced Interactive Python. Type '?' for help.\n"
</pre>
<p>You can customize the banner that is displayed on startup-- if you’re the kind of person who likes to tweak every customizable aspect of a system. You could cut it down to the important bits if you <em>are</em> into the whole brevity thing: <sup class="footnote-reference"><a href="config/banner1.html#fn3" id="ref3">3</a></sup></p>
<pre><code class="language-python">c.InteractiveShell.banner1 = &quot;Python 3.9.0 -- IPython 7.19.0\n&quot;
</code></pre>
<p>…or eliminate it entirely:</p>
<pre><code class="language-python">c.TerminalIPythonApp.display_banner = False
</code></pre>
<hr />
<p><sup class="footnote-definition" id="fn3">3. <a href="https://www.youtube.com/watch?v=pWdd6_ZxX8c">Yeah? Well, you know, that’s just like, uh… your opinion, man. </a><a href="config/banner1.html#ref3" title="Jump back to footnote 3 in the text.">↩</a></sup></p>
<h1><a class="header" href="#interactiveshellcolors" id="interactiveshellcolors">InteractiveShell.colors</a></h1>
<pre class="output">
## Set the color scheme (NoColor, Neutral, Linux, or LightBG).
#  Choices: any of ['Neutral', 'NoColor', 'LightBG', 'Linux'] (case-insensitive)
#  Default: 'Neutral'
</pre>
<p>You can select from a few color schemes— I use a dark background for my terminal so the default <code>Neutral</code> works for me, but try out <code>LightBG</code> if you use a light background color, or <code>Linux</code> if you’re really into Linux, or <code>NoColor</code> if you hate rainbows and happiness.</p>
<pre><code class="language-python">c.InteractiveShell.colors = 'LightBG'
</code></pre>
<p>You can also change this on-the-fly in the shell by invoking the magic command <code>%colors</code>:</p>
<pre><code class="language-python">%colors Linux
</code></pre>
<h1><a class="header" href="#confirm_exit" id="confirm_exit">confirm_exit</a></h1>
<pre class="output">
## Set to confirm when you try to exit IPython with an EOF (Control-D in Unix,
#  Control-Z/Enter in Windows). By typing 'exit' or 'quit', you can force a
#  direct exit without any confirmation.
#  Default: True
</pre>
<p>Whenever I quit an IPython session, I’m asked if I really want to quit. I do. Eventually I figured out that you don’t actually have to enter <code>y</code> for yes, though— you can just hit <code>return</code> and it will allow you to quit. There’s a better way, though, which saves you an additional key stroke. Setting this value to <code>False</code> will let you exit immediately.</p>
<pre><code class="language-python">c.TerminalInteractiveShell.confirm_exit = False
</code></pre>
<h1><a class="header" href="#editor" id="editor">editor</a></h1>
<pre class="output">
## Set the editor used by IPython (default to $EDITOR/vi/notepad).
#  Default: 'subl'
</pre>
<p>The default listed above is <code>subl</code> for me because I use Sublime Text as my default editor. For you, it may be <code>vim</code>, <code>vscode</code>, <code>emacs</code>, <code>nano</code>, or any number of text editors. For my particular case, as we will explore later, there is an <a href="config/../magic/edit.html"><code>%edit</code></a> magic command in IPython, which lets you …well, edit things. For whatever reason, Sublime Text does not work well with the <code>%edit</code> command. <sup class="footnote-reference"><a href="config/editor.html#fn4" id="ref4">4</a></sup>Because of this, I want to set IPython’s editor of choice to something else– <code>vim</code>, in my case: <sup class="footnote-reference"><a class="superscript" href="config/editor.html#fn5" id="ref5">5</a></sup></p>
<pre><code class="language-python">c.TerminalInteractiveShell.editor = 'vim'
</code></pre>
<hr />
<p><sup class="footnote-definition" id="fn4">4. Once <code>%edit</code> is invoked, a temporary file is created. In Sublime’s case, it immediately executes the code instead of waiting for the save signal to execute it, so there is never a chance of actually editing the file. <a href="config/editor.html#ref4" title="Jump back to footnote 4 in the text.">↩</a></sup><br>
<sup class="footnote-definition" id="fn5">5. A thousand apologies if I angered any Emacs wizards. I use Vim here because I know the basics, and watching me try to use Emacs is just an embarrassing spectacle that no one should have to witness.<a href="config/editor.html#ref5" title="Jump back to footnote 5 in the text.">↩</a></sup></p>
<h1><a class="header" href="#interactiveshellappexec_lines" id="interactiveshellappexec_lines">InteractiveShellApp.exec_lines</a></h1>
<pre class="output">
## lines of code to run at IPython startup.
#  Default: []
</pre>
<p><code>InteractiveShellApp.exec_lines</code> is a list that will execute on IPython’s startup. If you wanted to see <em>The Zen of Python</em> by Tim Peters everytime you fired up the shell, you could put in:</p>
<pre><code class="language-python">c.InteractiveShellApp.exec_lines = ['import this']
</code></pre>
<p>That might not be totally practical, but it could be inspiring. An extension that we will talk more about later is the <a href="config/../magic/autoreload.html"><code>autoreload</code></a> extension. It’s pretty nice to have this available without having to manually load it— it lets you change source code in an editor while the shell is still open, and it will reload its value without requiring you to have to restart your session. <sup class="footnote-reference"><a href="config/exec_lines.html#fn6" id="ref6">6</a></sup></p>
<p>You can enable it to run by default with these lines:</p>
<pre><code class="language-python">c.InteractiveShellApp.exec_lines = []
c.InteractiveShellApp.exec_lines.append('%load_ext autoreload')
c.InteractiveShellApp.exec_lines.append('%autoreload 2')    
</code></pre>
<hr />
<p><sup class="footnote-definition" id="fn6">6. As with anything seemingly too good to be true, <a href="https://ipython.org/ipython-doc/stable/config/extensions/autoreload.html#caveats">it does have its caveats</a> and doesn’t work for every case. It works more often than not, though, and can save you a lot of time.<a href="config/exec_lines.html#ref6" title="Jump back to footnote 6 in the text.">↩</a></sup></p>
<h1><a class="header" href="#highlighting_style" id="highlighting_style">highlighting_style</a></h1>
<pre class="output">
## The name or class of a Pygments style to use for syntax highlighting. To see
#  available styles, run `pygmentize -L styles`.
#  Default: traitlets.Undefined
</pre>
<p><a href="https://pygments.org/">Pygments</a> is a generic syntax highlighter used to prettify source code. You can set your style of choice by entering:</p>
<pre><code class="language-python">c.TerminalInteractiveShell.highlighting_style = 'monokai'
</code></pre>
<p>It is dependent on the <code>Pygments</code> library, which can be installed via:</p>
<pre><code>pip install Pygments
</code></pre>
<p>You can view all of the available styles (below is a sample of the complete output):</p>
<pre><code class="language-python">pygmentize -L styles
</code></pre>
<pre class="output">
* emacs:
    The default style (inspired by Emacs 22).
* monokai:
    This style mimics the Monokai color scheme.
* vim:
    Styles somewhat like vim 7.0
* xcode:
    Style similar to the Xcode default colouring theme.
* solarized-dark:
    The solarized style, dark.
* solarized-light:
    The solarized style, light.
</pre>
<h1><a class="header" href="#interactiveshellpdb" id="interactiveshellpdb">InteractiveShell.pdb</a></h1>
<pre class="output">
## Automatically call the pdb debugger after every exception.
#  Default: False
</pre>
<p>The <a href="https://docs.python.org/3/library/pdb.html">Python debugger</a> can be a super useful tool for stepping through code and examining what’s going on. Normally to use it, you import it and then set the trace:</p>
<pre><code class="language-python">import pdb; pdb.set_trace()
</code></pre>
<p>Things got a little more simple with the advent of <a href="https://www.python.org/dev/peps/pep-0553/">PEP 553</a> which introduced <code>breakpoint()</code> to Python 3.7. You can accomplish the above with simply:</p>
<pre><code class="language-python">breakpoint()
</code></pre>
<p>To invoke this automatically in your shell if you hit an exception, you can set it like so:</p>
<pre><code class="language-python">c.InteractiveShell.pdb = True
</code></pre>
<p>Now, whenever your code hits an exception, you will automatically be dropped into the debugger.</p>
<h1><a class="header" href="#magic-commands" id="magic-commands">Magic Commands</a></h1>
<pre><code>%magic
</code></pre>
<pre class="output">
The magic function system provides a series of functions which allow you to
control the behavior of IPython itself, plus a lot of system-type
features.
</pre>
<p>There are two kinds of magics: line and cell.</p>
<blockquote>
<p>Line magics are prefixed with the <code>%</code> character and work much like OS
command-line calls: they get as an argument the rest of the line, where
arguments are passed without parentheses or quotes.</p>
</blockquote>
<blockquote>
<p>Cell magics are prefixed with a double <code>%%</code>, and they are functions that get as an argument not only the rest of the line, but also the lines below it in a
separate argument.  These magics are called with two arguments: the rest of the
call line and the body of the cell, consisting of the lines below the first.</p>
</blockquote>
<p>Magic commands can be used <em>without</em> typing the <code>%</code> sign by default— this behavior is altered by running the magic command <code>%automagic</code>, which toggles the necessity of the preceding <code>%</code> character.</p>
<blockquote>
<p><i class="fa fa-fw fa-warning"></i> Keep in mind that if you create a variable that collides with an automagic command, using your variable (without the explicit <code>%</code> prefix) will override the magic command’s reference, e.g.</p>
</blockquote>
<pre><code class="language-python">In [1]: automagic

Automagic is OFF, % prefix IS needed for line magics.

In [2]: %automagic

Automagic is ON, % prefix IS NOT needed for line magics.

In [3]: automagic = print

In [4]: automagic
Out[4]: &lt;function print&gt;

In [5]: %automagic

Automagic is OFF, % prefix IS needed for line magics.
</code></pre>
<p>You can view all available magic commands by running <a href="../magic/lsmagic.html"><code>%lsmagic</code></a>. Some of them will be recognizable as system commands and they behave as you might expect:</p>
<pre class="output">
%alias  %cat  %cd  %clear  %less  %ls  %man  %mkdir  %more  %mv  %pip  %popd  %pushd  %pwd  %rm  %rmdir
</pre>
<p>Let’s look at some of the other commands that might be unfamiliar, and some examples of how you might use them.</p>
<h1><a class="header" href="#aimport" id="aimport">aimport</a></h1>
<pre class="output">
%aimport:
    %aimport => Import modules for automatic reloading.
</pre>
<p><code>%aimport</code> lets you specify a module to import that will automatically be reloaded. This command works alongside <a href="magic/./autoreload.html"><code>%autoreload</code></a>, which lets you specify the frequency or inclusion of what modules will be autoreloaded.</p>
<p>List modules to automatically import and not to import:</p>
<pre><code class="language-python">%aimport
</code></pre>
<p>Import module ‘foo’ and mark it to be autoreloaded for <code>%autoreload 1</code>:</p>
<pre><code class="language-python">%aimport foo
</code></pre>
<p>Import modules ‘foo’, ‘bar’ and mark them to be autoreloaded for <code>%autoreload 1</code>:</p>
<pre><code class="language-python">%aimport foo, bar
</code></pre>
<p>Mark module ‘foo’ to not be autoreloaded for <code>%autoreload 1</code>:</p>
<pre><code class="language-python">%aimport -foo
</code></pre>
<h1><a class="header" href="#autoreload" id="autoreload">autoreload</a></h1>
<pre class="output">
%autoreload:
    %autoreload => Reload modules automatically
</pre>
<p><code>%autoreload</code> will automatically reload modules, so you can edit code in an IDE or text editor, and when a change is made and saved, you can test the new functionality in the IPython shell without having to exit and start a new session. This is incredibly helpful and saves a lot of time-- and it will work <em>most</em> of the time. <a href="https://ipython.org/ipython-doc/stable/config/extensions/autoreload.html#caveats">There are some caveats involved</a>, but some of the problems that prevent successful reloading are:</p>
<ul>
<li>Changing a <code>@property</code> to a method or a method to a variable within a class</li>
<li>Functions that are removed from a module before it is reloaded are not upgraded</li>
<li>C extension modules cannot be reloaded</li>
</ul>
<p>You can pass in a parameter to either disable reloading completely, only use imports that were specified with the command <a href="magic/./aimport.html"><code>%aimport</code></a>, or reload all modules every time before the code is executed.</p>
<p>Disable automatic reloading:</p>
<pre><code class="language-python">%autoreload 0
</code></pre>
<p>Reload all modules imported with <code>%aimport</code> every time before executing
the Python code typed:</p>
<pre><code class="language-python">%autoreload 1
</code></pre>
<p>Reload all modules (except those excluded by <code>%aimport</code>) every time
before executing the Python code typed:</p>
<pre><code class="language-python">%autoreload 2
</code></pre>
<h1><a class="header" href="#bookmark" id="bookmark">bookmark</a></h1>
<pre class="output">
%bookmark:
    Manage IPython's bookmark system.
</pre>
<p>Setting bookmarks is very handy if you find yourself changing directories within a project, or even outside a project and would like to be have faster access to often-used directories.</p>
<pre class="output">
%bookmark &lt;name&gt;       - set bookmark to current dir
%bookmark &lt;name&gt; &lt;dir&gt; - set bookmark to &lt;dir&gt;
%bookmark -l           - list all bookmarks
%bookmark -d &lt;name&gt;    - remove bookmark
%bookmark -r           - remove all bookmarks
</pre>
<p>Here’s an example that shows setting a bookmark to the current directory, navigating to the user’s home directory, then coming back to the project:</p>
<pre><code class="language-python">In [1]: %pwd
Out[1]: '/Users/eric/projects/ipython-book'

In [2]: %bookmark book

In [3]: %bookmark -l
Current bookmarks:
book -&gt; /Users/eric/projects/ipython-book

In [4]: %cd ~
/Users/eric

In [5]: %pwd
Out[5]: '/Users/eric'

In [6]: %cd -b book
(bookmark:book) -&gt; /Users/eric/projects/ipython-book
/Users/eric/projects/ipython-book

In [7]: %pwd
Out[7]: '/Users/eric/projects/ipython-book'
</code></pre>
<p>You can also omit the <code>-b</code> after the <code>%cd</code> command if there’s no directory with the name of your bookmark. The bookmarks are associated with each profile and persist through IPython sessions.</p>
<h1><a class="header" href="#cpaste" id="cpaste">cpaste</a></h1>
<pre class="output">
%cpaste:
    Paste & execute a pre-formatted code block from clipboard.
</pre>
<p><code>%cpaste</code> and <a href="magic/./paste.html"><code>%paste</code></a> are pretty similar— they allow you to copy a block of code from somewhere outside of the shell and paste it in without having to tweak the indentation or removal of common Python snippet characters, like <code>&gt;</code> or <code>+</code> that are common in e-mails, diff files, and doctests.</p>
<p>The primary difference is that <code>%cpaste</code> allows you to paste in your snippet, and then continue to add more or edit what you pasted before it’s executed. You have to terminate your block with either two minus signs (<code>--</code>) or <code>CTRL-D</code> alone on an empty line.</p>
<pre><code class="language-python">In [1]: %cpaste
Pasting code; enter '--' alone on the line to stop.
:&gt;&gt;&gt; a = [&quot;world!&quot;, &quot;Hello&quot;]
:&gt;&gt;&gt; print &quot; &quot;.join(sorted(a))
:--
Hello world!
</code></pre>
<h1><a class="header" href="#debug" id="debug">debug</a></h1>
<pre class="output">
%debug:
    Activate the interactive debugger.
</pre>
<p>If an exception has just occurred, you can inspect its stack interactively by entering <code>%debug</code>, which will drop you into a <code>pdb</code> session. This will only work on the last traceback that occurred, so it must be called immediately, or else the exception may be clobbered by an additional exception.</p>
<pre><code class="language-python">In [1]: def this_will_not_work():
    ...:     first = 'abc'
    ...:     second = 'def'
    ...:     third = first / second
    ...:     return third
    ...:

In [2]: this_will_not_work()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input-2-b68cb3b4fc7d&gt; in &lt;module&gt;
----&gt; 1 this_will_not_work()

&lt;ipython-input-1-2389d0ae72e8&gt; in this_will_not_work()
      2     first = 'abc'
      3     second = 'def'
----&gt; 4     third = first / second
      5     return third

TypeError: unsupported operand type(s) for /: 'str' and 'str'

In [3]: %debug
&gt; &lt;ipython-input-1-2389d0ae72e8&gt;(4)this_will_not_work()
      1 def this_will_not_work():
      2     first = 'abc'
      3     second = 'def'
----&gt; 4     third = first / second
      5     return third

ipdb&gt; first
'abc'
ipdb&gt; second
'def'
</code></pre>
<p>You can have IPython do this automatically by setting the <a href="magic/../config/pdb.html"><code>%pdb</code> magic</a> in <code>ipython_config.py</code>.</p>
<h1><a class="header" href="#doctest_mode" id="doctest_mode">doctest_mode</a></h1>
<pre class="output">
%doctest_mode:
    Toggle doctest mode on and off.
</pre>
<p>You can change the way that IPython’s prompts, exceptions, and output looks by running <code>%doctest_mode</code>. This makes it easy to copy and paste code that has characters such as <code>&gt;&gt;&gt;</code> and <code>...</code> and have it recognize it. This is also handy if you use <a href="https://docs.python.org/3/library/doctest.html"><code>doctests</code></a> in your docstrings, as you can directly copy and paste them from the shell without having to leave the session and they are ready to use in your functions.</p>
<p>An example:</p>
<pre><code class="language-python">In [1]: def my_amazing_function(a, b):
    ...:     return a * b
    ...:

In [2]: %doctest_mode
Exception reporting mode: Plain
Doctest mode is: ON
&gt;&gt;&gt; my_amazing_function(2, 4)
8
&gt;&gt;&gt; my_amazing_function('woo', 3)
'woowoowoo'
&gt;&gt;&gt; %doctest_mode
Exception reporting mode: Context
Doctest mode is: OFF
</code></pre>
<p>Now you can copy and paste the examples directly into your code’s docstring. Below is a complete working example, let’s say saved as <code>example.py</code>:</p>
<pre><code class="language-python">def my_amazing_function(a, b):
    &quot;&quot;&quot;
    &gt;&gt;&gt; my_amazing_function(2, 4)
    8
    &gt;&gt;&gt; my_amazing_function('woo', 3)
    'woowoowoo'
    &quot;&quot;&quot;
    return a * b

if __name__ == &quot;__main__&quot;:
    import doctest
    doctest.testmod()
</code></pre>
<p>So running <code>python example.py</code> will run the doctest and verify your statements are true. You won’t see any message (since it passes) but you can pass in the <code>-v</code> parameter for it to print a verbose log.</p>
<pre><code>python example.py -v
</code></pre>
<pre class="output">
Trying:
    my_amazing_function(2, 4)
Expecting:
    8
ok
Trying:
    my_amazing_function('woo', 3)
Expecting:
    'woowoowoo'
ok
1 items had no tests:
    __main__
1 items passed all tests:
   2 tests in __main__.my_amazing_function
2 tests in 2 items.
2 passed and 0 failed.
Test passed.
</pre>
<h1><a class="header" href="#edit" id="edit">edit</a></h1>
<pre class="output">
%edit:
    Bring up an editor and execute the resulting code.
</pre>
<p><code>%edit</code> (or <code>%ed</code> as an alias) runs IPython’s edit hook. By default, it will call the editor specified by your environment variable <code>$EDITOR</code>, but this can be specificed in <code>ipython_config.py</code>’s <a href="magic/../config/editor.html"><code>editor</code></a> setting.</p>
<p>This is nice if you want to edit a lengthy function or potentially save a snippet you’ve been working on to a file.</p>
<p>If it is called with no arguments, it will open up an empty editor and will execute the contents once you save and exit.</p>
<p><code>%edit</code> also accepts arguments:</p>
<ul>
<li>A filename, which will be loaded into the editor</li>
<li>A range of input history, e.g. <code>%edit 5 7 10-12</code></li>
<li>A string variable</li>
<li>A function name</li>
<li>A <a href="magic/./macro.html">macro</a> name</li>
</ul>
<p>An example of creating a function, the editing it in an external editor:</p>
<pre><code class="language-python">In [1]: def brilliant_math_program(num):
    ...:     num += 1
    ...:     print(f'I increased your number to {num}')
    ...:

In [2]: brilliant_math_program(2)
I increased your number to 3

In [3]: %edit brilliant_math_program
Editing In[3]
IPython will make a temporary file named: /var/folders/qx/32hkz1f96yb557l4yd0_c6q80000gn/T/ipython_edit_6gzx7_2p/ipython_edit_s5u64by2.py
Editing... done. Executing edited code...
Out[3]: &quot;def brilliant_math_program(num):\n    num = num * 2\n    print(f'I doubled your number to {num}')\n     \n&quot;

In [4]: brilliant_math_program(2)
I doubled your number to 4
</code></pre>
<h1><a class="header" href="#env" id="env">env</a></h1>
<pre class="output">
%env:
    Get, set, or list environment variables.
</pre>
<p>If you need access to an environment variable and can’t remember what it was, you can recall it easily using <code>%env</code>. You can list all of them by passing the command by itself, or recall specific ones like <code>%env variable</code>, or set them like <code>%env variable new_value</code>.</p>
<pre><code class="language-python">In [1]: %env foo
UsageError: Environment does not have key: foo

In [2]: %env foo bar
env: foo=bar

In [3]: %env foo
Out[3]: 'bar'
</code></pre>
<h1><a class="header" href="#history" id="history">history</a></h1>
<pre class="output">
%history:
    Print input history, with most recent last.
</pre>
<p>By default, <code>%history</code> (or its alias <code>%hist</code>) prints the input history without line numbers for ease in copying into an editor, so if you <em>do</em> want to see them, pass in <code>-n</code> to see them.</p>
<p>You can specify ranges to be returned, e.g.</p>
<pre><code class="language-python">In [5]: %history -n 1 3-4
  1: a = 5
  3: d = 8
  4: e = 9
</code></pre>
<h1><a class="header" href="#load" id="load">load</a></h1>
<pre class="output">
%load:
    Load code into the current frontend.
</pre>
<p><code>%load</code> lets you load in code from a filename, input history range, macro, an element in the user namespace, or even from a URL. It is very useful for taking a section of code from something like a GitHub repo and being able to load it directly into the shell so you can test it or use it.</p>
<p>If you feed in a large section of code, you can specify which lines you want by passing in the range parameter (<code>-r</code>). Below is an example of loading a utility function from the <code>requests</code> library. It passes in the <code>import socket</code> on line 15, and then subsequently loads lines 641-650 for a function that determines if a passed-in string is an IPV4 address:</p>
<pre><code class="language-python">In [1]: %load -r 15,641-650 https://raw.githubusercontent.com/psf/requests/master/requests/utils.py

In [2]: # %load -r 15,641-650 https://raw.githubusercontent.com/psf/requests/master/requests/utils.py
    ...: import socket
    ...:
    ...:
    ...: def is_ipv4_address(string_ip):
    ...:     &quot;&quot;&quot;
    ...:     :rtype: bool
    ...:     &quot;&quot;&quot;
    ...:     try:
    ...:         socket.inet_aton(string_ip)
    ...:     except socket.error:
    ...:         return False
    ...:     return True
    ...:

In [3]: is_ipv4_address(&quot;192.168.0.1&quot;)
Out[3]: True

In [4]: is_ipv4_address(&quot;pizza-is-delicious&quot;)
Out[4]: False
</code></pre>
<h1><a class="header" href="#lsmagic" id="lsmagic">lsmagic</a></h1>
<pre class="output">
%lsmagic:
    List currently available magic functions.
</pre>
<p>Available line magics:
<code>%aimport</code>
<code>%alias</code>
<code>%alias_magic</code>
<code>%autoawait</code>
<code>%autocall</code>
<code>%autoindent</code>
<code>%automagic</code>
<code>%autoreload</code>
<code>%bookmark</code>
<code>%cat</code>
<code>%cd</code>
<code>%clear</code>
<code>%colors</code>
<code>%conda</code>
<code>%config</code>
<code>%cp</code>
<code>%cpaste</code>
<code>%debug</code>
<code>%dhist</code>
<code>%dirs</code>
<code>%doctest_mode</code>
<code>%ed</code>
<code>%edit</code>
<code>%env</code>
<code>%gui</code>
<code>%hist</code>
<code>%history</code>
<code>%killbgscripts</code>
<code>%ldir</code>
<code>%less</code>
<code>%lf</code>
<code>%lk</code>
<code>%ll</code>
<code>%load</code>
<code>%load_ext</code>
<code>%loadpy</code>
<code>%logoff</code>
<code>%logon</code>
<code>%logstart</code>
<code>%logstate</code>
<code>%logstop</code>
<code>%ls</code>
<code>%lsmagic</code>
<code>%lx</code>
<code>%macro</code>
<code>%magic</code>
<code>%man</code>
<code>%matplotlib</code>
<code>%mkdir</code>
<code>%more</code>
<code>%mv</code>
<code>%notebook</code>
<code>%page</code>
<code>%paste</code>
<code>%pastebin</code>
<code>%pdb</code>
<code>%pdef</code>
<code>%pdoc</code>
<code>%pfile</code>
<code>%pinfo</code>
<code>%pinfo2</code>
<code>%pip</code>
<code>%popd</code>
<code>%pprint</code>
<code>%precision</code>
<code>%prun</code>
<code>%psearch</code>
<code>%psource</code>
<code>%pushd</code>
<code>%pwd</code>
<code>%pycat</code>
<code>%pylab</code>
<code>%quickref</code>
<code>%recall</code>
<code>%rehashx</code>
<code>%reload_ext</code>
<code>%rep</code>
<code>%rerun</code>
<code>%reset</code>
<code>%reset_selective</code>
<code>%rm</code>
<code>%rmdir</code>
<code>%run</code>
<code>%save</code>
<code>%sc</code>
<code>%set_env</code>
<code>%store</code>
<code>%sx</code>
<code>%system</code>
<code>%tb</code>
<code>%time</code>
<code>%timeit</code>
<code>%unalias</code>
<code>%unload_ext</code>
<code>%who</code>
<code>%who_ls</code>
<code>%whos</code>
<code>%xdel</code>
<code>%xmode</code></p>
<p>Available cell magics:
<code>%%!</code>
<code>%%HTML</code>
<code>%%SVG</code>
<code>%%bash</code>
<code>%%capture</code>
<code>%%debug</code>
<code>%%file</code>
<code>%%html</code>
<code>%%javascript</code>
<code>%%js</code>
<code>%%latex</code>
<code>%%markdown</code>
<code>%%perl</code>
<code>%%prun</code>
<code>%%pypy</code>
<code>%%python</code>
<code>%%python2</code>
<code>%%python3</code>
<code>%%ruby</code>
<code>%%script</code>
<code>%%sh</code>
<code>%%svg</code>
<code>%%sx</code>
<code>%%system</code>
<code>%%time</code>
<code>%%timeit</code>
<code>%%writefile</code></p>
<h1><a class="header" href="#macro" id="macro">macro</a></h1>
<pre class="output">
%macro:
    Define a macro for future re-execution. It accepts ranges of history,
    filenames or string objects.
</pre>
<p><code>%macro</code> is a great way of storing code snippets into a bundle that can be re-used for future use. </p>
<p>An example:</p>
<pre><code class="language-python">In [1]: a = 10

In [2]: b = 2

In [3]: c = a * b

In [4]: print(c)
20

In [5]: %macro abc 1-4
Macro `abc` created. To execute, type its name (without quotes).
=== Macro contents: ===
a = 10
b = 2
c = a * b
print(c)

In [6]: abc
20
</code></pre>
<p>You can view a macro’s contents by explicitly printing it:</p>
<pre><code class="language-python">print(macro_name)
</code></pre>
<pre><code class="language-python">In [7]: print(abc)
a = 10
b = 2
c = a * b
print(c)
</code></pre>
<h1><a class="header" href="#magic" id="magic">magic</a></h1>
<pre class="output">
%magic
    Print information about the magic function system.
</pre>
<p>Think of <code>%magic</code> as the user’s guide to magic commands. It steps through all of the commands listed in <a href="magic/./lsmagic.html"><code>%lsmagic</code></a> with extensive examples and all available parameters.</p>
<p>It supports three optional display parameters: <code>-latex</code>, <code>-brief</code>, and <code>-rest</code>. Here’s an example of the results for the first entry, <a href="magic/./aimport.html"><code>aimport</code></a>:</p>
<pre><code>%magic
</code></pre>
<pre class="output">
%aimport:
    %aimport => Import modules for automatic reloading.

    %aimport
    List modules to automatically import and not to import.

    %aimport foo
    Import module 'foo' and mark it to be autoreloaded for %autoreload 1

    %aimport foo, bar
    Import modules 'foo', 'bar' and mark them to be autoreloaded for %autoreload 1

    %aimport -foo
    Mark module 'foo' to not be autoreloaded for %autoreload 1
</pre>
<pre><code>%magic -latex
</code></pre>
<pre class="output">
\bigskip
\texttt{\textbf{ \%aimport}}:
    \texttt{\%aimport} => Import modules for automatic reloading.

    \texttt{\%aimport}
    List modules to automatically import and not to import.

    \texttt{\%aimport} foo
    Import module 'foo' and mark it to be autoreloaded for \texttt{\%autoreload} 1

    \texttt{\%aimport} foo, bar
    Import modules 'foo', 'bar' and mark them to be autoreloaded for \texttt{\%autoreload} 1

    \texttt{\%aimport} -foo
    Mark module 'foo' to not be autoreloaded for \texttt{\%autoreload} 1
</pre>
<pre><code>%magic -brief
</code></pre>
<pre class="output">
%aimport:
    %aimport => Import modules for automatic reloading.
</pre>
<pre><code>magic -rest
</code></pre>
<pre class="output">
**%aimport**::

    %aimport => Import modules for automatic reloading.

    %aimport
    List modules to automatically import and not to import.

    %aimport foo
    Import module 'foo' and mark it to be autoreloaded for %autoreload 1

    %aimport foo, bar
    Import modules 'foo', 'bar' and mark them to be autoreloaded for %autoreload 1

    %aimport -foo
    Mark module 'foo' to not be autoreloaded for %autoreload 1
</pre>
<h1><a class="header" href="#notebook" id="notebook">notebook</a></h1>
<pre class="output">
%notebook:
    Export and convert IPython notebooks.
</pre>
<p>Jupyter notebooks are very powerful tools and support a wide range of workflows in data science, scientific computing, and machine learning. We can export the history of a shell session into a notebook file, which can be opened and executed or edited later within a notebook.</p>
<pre><code class="language-python">%notebook filename.ipynb
</code></pre>
<h1><a class="header" href="#paste" id="paste">paste</a></h1>
<pre class="output">
%paste:
    Paste & execute a pre-formatted code block from clipboard.
</pre>
<p>Similar to <a href="magic/./cpaste.html"><code>%cpaste</code></a>, <code>%paste</code> allows you to paste a copied block of text properly into the shell, and it automatically handles any indentation differences, and ignores the <code>&gt;</code> and <code>+</code> characters that may be present in e-mails, diffs, doctests, or code samples.</p>
<p>Unlike <code>%cpaste</code>, once you execute <code>%paste</code>, it automatically pastes and executes the block, so there is no further editing involved. It <em>does</em> however assign a variable to the pasted block, which is aptly named <code>pasted_block</code>, so you can then later edit it, e.g. <code>%edit pasted_block</code>. You can override this variable name by passing in a variable name directly:</p>
<pre><code class="language-python">%paste my_cool_code
</code></pre>
<h1><a class="header" href="#pastebin" id="pastebin">pastebin</a></h1>
<pre class="output">
%pastebin:
    Upload code to dpaste's paste bin, returning the URL.
</pre>
<p>Sharing code with a collaborator can be tricky sometimes– formatting in e-mails can be hit or miss, Slack has pretty good support, but if it’s a free account, then the history gets erased after a couple of days. Pastebin sites are usually a good way to do this, but it can still be a pain to copy and paste using the correct indentation and erasing all of the <code>In</code> and <code>Out</code> prompts. </p>
<p><code>%pastebin</code> allows you to upload a history range, filename, string, or macro to <a href="https://dpaste.com">dpaste.com</a>, which is a publicly-accessible pastebin site. The snippet that you upload is shareable through a unique link, and expires after 7 days.</p>
<p>By default, the title is “Pasted from IPython” but you can set the description with <code>-d</code>:</p>
<pre><code class="language-python">In [1]: import codecs

In [2]: def my_secret_translator(message):
    ...:     coded_message = codecs.encode(message, 'rot_13')
    ...:     print(coded_message)
    ...:

In [3]: my_secret_translator('My cat meows at midnight')
Zl png zrbjf ng zvqavtug

In [4]: my_secret_translator('Zl png zrbjf ng zvqavtug')
My cat meows at midnight

In [5]: %pastebin -d 'I learned this in &quot;IPython for Web Devs&quot;!' 1-2
Out[5]: 'http://dpaste.com/CVQQQLVKX'
</code></pre>
<h1><a class="header" href="#pdb" id="pdb">pdb</a></h1>
<pre class="output">
%pdb:
    Control the automatic calling of the pdb interactive debugger.
</pre>
<p>Just as you can set <a href="magic/../config/pdb.html"><code>pdb</code></a> to trigger on an exception in the <code>ipython_config.py</code> file, you can set it directly with the magic command <code>%pdb</code>.</p>
<p>It accepts “truthy” (<code>%pdb on</code> or <code>%pdb 1</code>) or “falsey” (<code>%pdb off</code> or <code>%pdb 0</code>) values, and if called without the argument it works as a toggle.</p>
<p>If you want to just activate the debugger after an exception has fired,
without having to type <code>%pdb on</code> and rerunning your code, you can use
the <a href="magic/./debug.html"><code>%debug</code></a> magic.</p>
<h1><a class="header" href="#pdef" id="pdef">pdef</a></h1>
<pre class="output">
%pdef:
    Print the call signature for any callable object.
</pre>
<p><code>%pdef</code> prints a call signature for an object, or if the object is a class, it will print the constructor information. This is an easy way to see what parameters may or may not be required when creating or updating an object.</p>
<pre><code class="language-python">In [1]: import calendar

In [2]: %pdef calendar.TextCalendar
Class constructor information:
 calendar.TextCalendar(firstweekday=0)

In [3]: import hashlib

In [4]: %pdef hashlib.md5
 hashlib.md5(string=b'', *, usedforsecurity=True)
</code></pre>
<h1><a class="header" href="#pdoc" id="pdoc">pdoc</a></h1>
<pre class="output">
%pdoc:
    Print the docstring for an object.
</pre>
<p><code>%pdoc</code> will print out the object’s docstring, or if it is a class, it will print both the class and constructor docstrings.</p>
<pre><code class="language-python">In [1]: from textwrap import dedent

In [2]: %pdoc dedent
Class docstring:
    Remove any common leading whitespace from every line in `text`.

    This can be used to make triple-quoted strings line up with the left
    edge of the display, while still presenting them in the source code
    in indented form.

    Note that tabs and spaces are both treated as whitespace, but they
    are not equal: the lines &quot;  hello&quot; and &quot;\thello&quot; are
    considered to have no common leading whitespace.

    Entirely blank lines are normalized to a newline character.
Call docstring:
    Call self as a function.
</code></pre>
<h1><a class="header" href="#pinfo" id="pinfo">pinfo</a></h1>
<pre class="output">
%pinfo:
    Provide detailed information about an object.
</pre>
<p><code>%pinfo</code> is a synonym for <code>object?</code> or <code>?object</code>, which prints out detailed information about an object. This is an incredibly useful feature that lets you examine objects, including magic commands. We can get information about <code>%pinfo</code> itself, inception-style:</p>
<pre><code class="language-python">In [1]: %pinfo?
Docstring:
Provide detailed information about an object.

'%pinfo object' is just a synonym for object? or ?object.
File:      ~/.virtualenvs/ipython-book/lib/python3.9/site-packages/IPython/core/magics/namespace.py
</code></pre>
<p>Off the top of your head, do you know all of the parameters for <code>timedelta</code>? If not, this is a great way to show them along with some other helpful information:</p>
<pre><code class="language-python">In [2]: from datetime import timedelta

In [3]: timedelta?
Init signature: timedelta(self, /, *args, **kwargs)
Docstring:
Difference between two datetime values.

timedelta(days=0, seconds=0, microseconds=0, milliseconds=0, minutes=0, hours=0, weeks=0)

All arguments are optional and default to 0.
Arguments may be integers or floats, and may be positive or negative.
File:           ~/.pyenv/versions/3.9.0/lib/python3.9/datetime.py
Type:           type
Subclasses:
</code></pre>
<h1><a class="header" href="#pinfo2" id="pinfo2">pinfo2</a></h1>
<pre class="output">
%pinfo2:
    Provide extra detailed information about an object.
</pre>
<p><code>%pinfo2</code> is <code>%pinfo</code> taken one step further, and diving into the source code. Also similarly, <code>%pinfo2</code> is a synonym for <code>object??</code> or <code>??object</code>. Again, we examine the source code that actually makes <code>%pinfo2</code> tick:</p>
<pre><code class="language-python">In [1]: pinfo2??
Source:
    @line_magic
    def pinfo2(self, parameter_s='', namespaces=None):
        &quot;&quot;&quot;Provide extra detailed information about an object.

        '%pinfo2 object' is just a synonym for object?? or ??object.&quot;&quot;&quot;
        self.shell._inspect('pinfo', parameter_s, detail_level=1,
                            namespaces=namespaces)
File:   ~/.virtualenvs/ipython-book/lib/python3.9/site-packages/IPython/core/magics/namespace.py
</code></pre>
<p>If you wondered what happens when you base64 encode a file, you can see for yourself:</p>
<pre><code class="language-python">In [2]: import base64

In [3]: base64.encode??
Signature: base64.encode(input, output)
Source:
def encode(input, output):
    &quot;&quot;&quot;Encode a file; input and output are binary files.&quot;&quot;&quot;
    while True:
        s = input.read(MAXBINSIZE)
        if not s:
            break
        while len(s) &lt; MAXBINSIZE:
            ns = input.read(MAXBINSIZE-len(s))
            if not ns:
                break
            s += ns
        line = binascii.b2a_base64(s)
        output.write(line)
File:      ~/.pyenv/versions/3.9.0/lib/python3.9/base64.py
Type:      function
</code></pre>
<h1><a class="header" href="#pprint" id="pprint">pprint</a></h1>
<pre class="output">
%pprint:
    Toggle pretty printing on/off.
</pre>
<p>Pretty printing is on by default, but you can toggle it off and on with <code>%pprint</code>:</p>
<pre><code class="language-python">In [1]: s = {
     ...:     'a': [1,2,3,4,5,6,7,8,9,10],
     ...:     'b': {1:2, 2:3, 3:4, 4:5, 5:6, 6:7, 7:8, 8:9, 9:10},
     ...:     'c': (1,2,3,4,5,6,7,8,9,10)
     ...: }
     ...:

In [2]: %pprint
Pretty printing has been turned OFF

In [3]: s
Out[3]: {'a': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10], 'b': {1: 2, 2: 3, 3: 4, 4: 5, 5: 6, 6: 7, 7: 8, 8: 9, 9: 10}, 'c': (1, 2, 3, 4, 5, 6, 7, 8, 9, 10)}

In [4]: %pprint
Pretty printing has been turned ON

In [5]: s
Out[5]:
{'a': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
 'b': {1: 2, 2: 3, 3: 4, 4: 5, 5: 6, 6: 7, 7: 8, 8: 9, 9: 10},
 'c': (1, 2, 3, 4, 5, 6, 7, 8, 9, 10)}
</code></pre>
<h1><a class="header" href="#psearch" id="psearch">psearch</a></h1>
<pre class="output">
%psearch:
    Search for object in namespaces by wildcard.
</pre>
<p><code>%psearch</code> lets you search for objects in namespaces, both built-in objects like <code>dict</code>, as well as any user-created objects in the session.</p>
<p><code>?</code> can be used as a synonym at the beginning or end for <code>%psearch</code>, if used with <code>*</code> as a wildcard. For example:</p>
<pre><code class="language-python">In [1]: a*?
abs
all
any
ascii
</code></pre>
<p>You can pass in <code>-i</code> to make it a case-insensitive search:</p>
<pre><code class="language-python">In [2]: %psearch -i a*
ArithmeticError
AssertionError
AttributeError
abs
all
any
ascii
</code></pre>
<p>To list all available object types for object matching, pass in <code>-l</code>:</p>
<pre><code class="language-python">In [3]: %psearch -l
asyncgenerator
builtinfunction
builtinmethod
cell
classmethoddescriptor
code
coroutine
frame
function
generator
getsetdescriptor
lambda
mappingproxy
memberdescriptor
method
methoddescriptor
methodwrapper
module
traceback
wrapperdescriptor
</code></pre>
<h1><a class="header" href="#pycat" id="pycat">pycat</a></h1>
<pre class="output">
%pycat:
    Show a syntax-highlighted file through a pager.
</pre>
<p><code>%pycat</code> is very similar to the <code>cat</code> utility, which will read a file and write it to standard output, but additionally assumes the file is written in Python, and will show it with syntax highlighting. The command can take a local filename, a URL, a <a href="magic/./history.html"><code>%history</code></a> range, or a <a href="magic/./macro.html"><code>%macro</code></a>.</p>
<pre><code class="language-python">%pycat my_file.py
</code></pre>
<pre><code class="language-python">%pycat https://raw.githubusercontent.com/ehamiter/pindead/master/pindead.py
</code></pre>
<pre><code class="language-python">%pycat 16-23
</code></pre>
<pre><code class="language-python">%pycat my_macro
</code></pre>
<h1><a class="header" href="#quickref" id="quickref">quickref</a></h1>
<pre class="output">
%quickref:
    Show a quick reference sheet
</pre>
<p><code>%quickref</code> shows the IPython quick reference card in a pager. This has some concise examples and shows a brief summary of all of the available magic commands.</p>
<h1><a class="header" href="#recall" id="recall">recall</a></h1>
<pre class="output">
%recall:
    Repeat a command, or get command to input line for editing.
</pre>
<p><code>%recall</code> (along with its alias <code>%rep</code>) repeats a command, and places the resulting output into a new line input. This allows you to create elaborate command lines without relying on copying and pasting.</p>
<pre><code class="language-python">In [1]: grocery_list = ['apples', 'bananas', 'soup', 'ice cream']

In [2]: &quot;, &quot;.join(grocery_list)
Out[2]: 'apples, bananas, soup, ice cream'

In [3]: %recall

In [4]: apples, bananas, soup, ice cream  # &lt;= The cursor will be waiting here
</code></pre>
<p>You can also place lines from history (find out by using <a href="magic/./history.html"><code>%history -n</code></a>) on the next input prompt:</p>
<pre><code class="language-python">In [5]: a = 'foo'

In [6]: b = 'bar'

In [7]: c = a + ' ' + b

In [8]: c
Out[8]: 'foo bar'

In [9]: %recall 7

In [10]: c = a + ' ' + b  # &lt;= The cursor will be waiting here
</code></pre>
<h1><a class="header" href="#rerun" id="rerun">rerun</a></h1>
<pre class="output">
%rerun:
    Re-run previous input
</pre>
<p>You can repeat the last line by passing <code>%rerun</code> with no arguments, or pass in a line or line range from history.</p>
<pre><code class="language-python">In [1]: class Person:
    ...:     def __init__(self, name, age, email):
    ...:         self.name = name
    ...:         self.age = age
    ...:         self.email = email
    ...:

In [2]: p1 = Person('Zoe', 45, 'zoe@anemailaddress.com')

In [3]: p1.age = 57

In [4]: p1.age
Out[4]: 57

In [5]: rerun 2
=== Executing: ===
p1 = Person('Zoe', 45, 'zoe@anemailaddress.com')
=== Output: ===

In [6]: p1.age
Out[6]: 45
</code></pre>
<h1><a class="header" href="#reset" id="reset">reset</a></h1>
<pre class="output">
%reset:
    Resets the namespace by removing all names defined by the user, if
    called without arguments, or by removing some types of objects, such
    as everything currently in IPython's In[] and Out[] containers.
</pre>
<p>You can <code>%reset</code> all assigned variables in your session without confirmation by passing in the <code>-f</code> parameter:</p>
<pre><code class="language-python">%reset -f
</code></pre>
<p>Keep in mind this will also delete your <a href="magic/./history.html"><code>%history</code></a>. To preserve your history, you can pass in <code>-s</code> for a “soft” reset:</p>
<pre><code class="language-python">%reset -s
</code></pre>
<p>You can also reset just the input or output history or directory history:</p>
<pre><code class="language-python">%reset in
</code></pre>
<pre><code class="language-python">%reset out
</code></pre>
<pre><code class="language-python">%reset dhist
</code></pre>
<h1><a class="header" href="#save" id="save">save</a></h1>
<pre class="output">
%save:
    Save a set of lines or a macro to a given filename.
</pre>
<p>After you have tested and tweaked a few lines in the shell, and would benefit from having the code around permananetly, you can <code>%save</code> a set of lines or a macro to a filename.</p>
<p>The default syntax is <code>%save filename [lines]</code>:</p>
<pre><code class="language-python">In [1]: def ends_in_za(word):
   ...:     if word.endswith('za'):
   ...:         print('It ends in za!')
   ...:     else:
   ...:         print('It does not end in za.')
   ...:

In [2]: ends_in_za('pizza')
It ends in za!

In [3]: ends_in_za('asparagus')
It does not end in za.

In [4]: %save ends_in_za 1
The following commands were written to file `ends_in_za.py`:
def ends_in_za(word):
    if word.endswith('za'):
        print('It ends in za!')
    else:
        print('It does not end in za.')
</code></pre>
<p>There are a few options you can pass in directly after <code>%save</code>:</p>
<pre class="output">
-r: use 'raw' input.  By default, the 'processed' history is used,
so that magics are loaded in their transformed version to valid
Python.  If this option is given, the raw input as typed as the
command line is used instead.

-f: force overwrite.  If file exists, %save will prompt for overwrite
unless -f is given.

-a: append to the file instead of overwriting it.
</pre>
<h1><a class="header" href="#script" id="script">script</a></h1>
<pre class="output">
%%script:
    Run a cell via a shell command

    The `%%script` line is like the #! line of script,
    specifying a program (bash, perl, ruby, etc.) with which to run.

    The rest of the cell is run by that program.
</pre>
<p><code>%%script</code> is a cell magic that can be used to run scripts other than Python in your shell, like Bash, Perl, Ruby, or different versions of Python.</p>
<p>Each language has a shortcut, so <code>%%ruby</code> is the equivalent of <code>%%script ruby</code>, <code>%%bash</code> is the equivalent of <code>%%script bash</code>, etc.</p>
<pre><code class="language-python">In [1]: %%script bash
    ...: for i in 1 2 3; do
    ...:   echo $i
    ...: done
    ...:
    ...:
1
2
3
</code></pre>
<pre><code class="language-python">In [2]: %%ruby
    ...: things = %w( granite snails calcium pie )
    ...: puts things
    ...:
    ...:
granite
snails
calcium
pie
</code></pre>
<pre><code class="language-python">In [3]: %%perl
    ...: not exp log srand xor s qq qx xor
    ...: s x x length uc ord and print chr
    ...: ord for qw q join use sub tied qx
    ...: xor eval xor print qq q q xor int
    ...: eval lc q m cos and print chr ord
    ...: for qw y abs ne open tied hex exp
    ...: ref y m xor scalar srand print qq
    ...: q q xor int eval lc qq y sqrt cos
    ...: and print chr ord for qw x printf
    ...: each return local x y or print qq
    ...: s s and eval q s undef or oct xor
    ...: time xor ref print chr int ord lc
    ...: foreach qw y hex alarm chdir kill
    ...: exec return y s gt sin sort split
    ...:
    ...:
just another perl hacker
</code></pre>
<h1><a class="header" href="#store" id="store">store</a></h1>
<pre class="output">
%store:
    Lightweight persistence for python variables.
</pre>
<p><code>%store</code> allows you to save a variable and access it after exiting a session. To save a variable, you simply pass it as the sole argument:</p>
<pre><code class="language-python">In [1]: my_name = 'Eric'

In [2]: %store my_name
Stored 'my_name' (str)
</code></pre>
<p>You can then exit the session, enter a new one, and recall it with the <code>-r</code> parameter:</p>
<pre><code class="language-python">In [3]: exit
</code></pre>
<pre><code>ipython --profile=zagnut
</code></pre>
<pre><code class="language-python">In [1]: my_name
Out[1]: NameError: name 'my_name' is not defined

In [2]: %store -r

In [3]: my_name
Out[3]: 'Eric'
</code></pre>
<p>You can edit your IPython configuration to <a href="magic/../config/autorestore.html">always autoload any stored variables</a>.</p>
<h2><a class="header" href="#additional-options" id="additional-options">Additional options</a></h2>
<p>Show a list of all variables and their current values:</p>
<pre><code class="language-python">%store
</code></pre>
<p>Store the <em>current</em> value of the variables <code>eggs</code> and <code>motorcycles</code>:</p>
<pre><code class="language-python">%store eggs motorcycles
</code></pre>
<p>Remove the variable <code>eggs</code> and its value from storage:</p>
<pre><code class="language-python">%store -d eggs
</code></pre>
<p>Remove all variables from storage:</p>
<pre><code class="language-python">%store -z
</code></pre>
<blockquote>
<p><i class="fa fa-fw fa-warning"></i> It should be noted that if you change the value of a variable, you need to <code>%store</code> it again if you want to persist the new value.</p>
</blockquote>
<h1><a class="header" href="#system" id="system">system</a></h1>
<pre class="output">
%system:
    Shell execute - run shell command and capture output (!! is short-hand).
</pre>
<p><code>%system</code> has two aliases: <code>%sx</code> and <code>!!</code>.</p>
<p>To run a system command in IPython, like <code>ls</code>, you can put a single leading <code>!</code> in front of it, e.g.</p>
<pre><code class="language-python">In [1]: !ls
LICENSE     README.md   book        book.toml   deploy.sh   src
</code></pre>
<p>Two leading <code>!!</code> is the short-hand for <code>%system</code> or <code>%sx</code>. The difference between using single or double exclamation points is that <code>!!</code> returns the results in a list that is split on <code>\n</code>, and since it is returned, it will be stored in the output history.</p>
<pre><code class="language-python">In [2]: !!ls
Out[2]: ['LICENSE', 'README.md', 'book', 'book.toml', 'deploy.sh', 'src']
</code></pre>
<h1><a class="header" href="#tb" id="tb">tb</a></h1>
<pre class="output">
%tb:
    Print the last traceback.
</pre>
<p><code>%tb</code> prints the last traceback. You can also pass in exception reporting modes (plain, context, verbose, minimal) to get more or less information (normally set with <a href="magic/./xmode.html"><code>%xmode</code></a>):</p>
<pre><code class="language-python">In [1]: 5 // 0
---------------------------------------------------------------------------
ZeroDivisionError                         Traceback (most recent call last)
&lt;ipython-input-7-e6530c2158eb&gt; in &lt;module&gt;
----&gt; 1 5 // 0

ZeroDivisionError: integer division or modulo by zero

In [2]: %tb
---------------------------------------------------------------------------
ZeroDivisionError                         Traceback (most recent call last)
&lt;ipython-input-7-e6530c2158eb&gt; in &lt;module&gt;
----&gt; 1 5 // 0

ZeroDivisionError: integer division or modulo by zero

In [3]: %tb plain
Traceback (most recent call last):
  File &quot;&lt;ipython-input-23-e6530c2158eb&gt;&quot;, line 1, in &lt;module&gt;
    5 // 0
ZeroDivisionError: integer division or modulo by zero

In [4]: %tb minimal
ZeroDivisionError: integer division or modulo by zero
</code></pre>
<h1><a class="header" href="#timeit" id="timeit">timeit</a></h1>
<pre class="output">
%timeit:
    Time execution of a Python statement or expression
</pre>
<p><code>%timeit</code> is a commonly used magic command used for gauging the efficiency and speed of a function. Suppose we have two methods that return the same result, but we’re not exactly sure which one is more efficient (which is especially helpful if you’re not super familiar with <a href="https://en.wikipedia.org/wiki/Big_O_notation">Big O notation</a>).</p>
<pre><code class="language-python">In [1]: def square(x):
   ...:     return pow(x, 2)

In [2]: square(2)
Out[2]: 4

In [3]: def square_alternative(x):
   ...:     return x * x

In [4]: square_alternative(2)
Out[4]: 4

In [5]: %timeit square(2)
479 ns ± 15.3 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)

In [6]: %timeit square_alternative(2)
130 ns ± 0.217 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each)
</code></pre>
<p>In this example we can see that the <code>square_alternative()</code> is much faster than  the <code>square()</code> function that uses Python’s builtin <code>pow()</code> function.</p>
<p>We can also use cell magic to only time certain aspects of a function if it requires some initial setup. Suppose we want to run the <code>square_alternative</code> function on a number that will be calculated, but we don’t want to include the initial calculation of <code>x</code>. We can do this using two <code>%</code> symbols, so it only times the last line:</p>
<pre><code class="language-python">In [7]: import math

In [8]: %%timeit x = math.pi * math.tau
   ...: square_alternative(x)
   ...:
   ...:
132 ns ± 1.54 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each)
</code></pre>
<h1><a class="header" href="#who" id="who">who</a></h1>
<pre class="output">
%who:
    Print all interactive variables, with some minimal formatting.
</pre>
<p><code>%who</code> is a nice way of looking at all of the variables you have created or assigned:</p>
<pre><code class="language-python">In [1]: class Automobile:
   ...:     def __init__(self, name, color, doors):
   ...:         self.name = name
   ...:         self.color = color
   ...:         self.doors = doors
   ...:

In [2]: a = Automobile('Family Truckster', 'green', 4)

In [3]: s = 'this is some string'

In [4]: i = 54447877

In [5]: f = 45.99

In [6]: d = {'a': 'dict'}

In [7]: t = ('a', 'tuple')

In [8]: %who
Automobile   a   d   f   i   s   t
</code></pre>
<p>You can also filter by types, e.g. <code>str</code>, <code>int</code>, et cetera:</p>
<pre><code class="language-python">In [9]: %who str
s
</code></pre>
<p>To get a more detailed view of assigned variables, you can use <a href="magic/./whos.html"><code>%whos</code></a>.</p>
<h1><a class="header" href="#whos" id="whos">whos</a></h1>
<pre class="output">
%whos:
    Like %who, but gives some extra information about each variable.
</pre>
<pre><code class="language-python">In [1]: class Automobile:
   ...:     def __init__(self, name, color, doors):
   ...:         self.name = name
   ...:         self.color = color
   ...:         self.doors = doors
   ...:

In [2]: a = Automobile('Family Truckster', 'green', 4)

In [3]: s = 'this is some string'

In [4]: i = 54447877

In [5]: f = 45.99

In [6]: d = {'a': 'dict'}

In [7]: t = ('a', 'tuple')

In [8]: %whos
Variable   Type       Data/Info
-------------------------------
Automobile type       &lt;class '__main__.Automobile'&gt;
s          str        this is some string
i          int        54447877
f          float      45.99
d          dict       n=1
t          tuple      n=2
a          Automobile &lt;__main__.Automobile object at 0x104a0bd30&gt;
</code></pre>
<p>Like <a href="magic/./who.html"><code>%who</code></a>, you can filter by type:</p>
<pre><code class="language-python">In [9]: %whos dict
Variable   Type    Data/Info
----------------------------
d          dict    n=1
</code></pre>
<h1><a class="header" href="#xdel" id="xdel">xdel</a></h1>
<pre class="output">
%xdel:
    Delete a variable, trying to clear it from anywhere that
    IPython's machinery has references to it. By default, this uses
    the identity of the named object in the user namespace to remove
    references held under other names. The object is also removed
    from the output history.
</pre>
<pre><code class="language-python">In [1]: animal = 'porcupine'

In [2]: animal
Out[2]: 'porcupine'

In [3]: %xdel animal

In [4]: animal
NameError: name 'animal' is not defined
</code></pre>
<h1><a class="header" href="#xmode" id="xmode">xmode</a></h1>
<pre class="output">
%xmode:
    Switch modes for the exception handlers.
</pre>
<p><code>%xmode</code> toggles between different modes of exception handling (plain, context, verbose, minimal). A mode can also be passed in directly as a parameter.</p>
<pre><code class="language-python">In [1]: bologna
NameError: name 'bologna' is not defined


In [2]: %xmode
Exception reporting mode: Plain

In [3]: bologna
Traceback (most recent call last):
  File &quot;&lt;ipython-input-38-5de53f9f76d4&gt;&quot;, line 1, in &lt;module&gt;
    bologna
NameError: name 'bologna' is not defined


In [4]: %xmode verbose
Exception reporting mode: Verbose

In [5]: bologna
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
&lt;ipython-input-40-5de53f9f76d4&gt; in &lt;module&gt;
----&gt; 1 bologna
        global bologna = undefined

NameError: name 'bologna' is not defined
</code></pre>
<h1><a class="header" href="#colophon" id="colophon">Colophon</a></h1>
<p><span class="smallcaps">The body text</span> of <em>IPython for Web Devs</em> is set in <a href="https://fonts.google.com/specimen/Gentium+Basic">Gentium Book Basic</a>, which was designed by Victor Gaultney. The Gentium Book Basic font family is based on the original Gentium design, but with additional weights. The family comes with a complete regular, bold, italic and bold italic set of fonts.</p>
<p><span class="smallcaps">The side chapter text</span> is set in <a href="https://fonts.google.com/specimen/Open+Sans">Open Sans</a>, a humanist sans serif typeface which was designed by Steve Matteson. Open Sans was designed with an upright stress, open forms and a neutral, yet friendly appearance. It was optimized for print, web, and mobile interfaces, and has excellent legibility characteristics in its letterforms.</p>
<p><span class="smallcaps">The monospaced font</span> used for code samples is <a href="https://github.com/ehamiter/Edlo">Edlo</a>, which I created by modifying a version of Stephen G. Hartke’s <a href="https://www.dafont.com/aurulent-sans-mono.font">Aurulent Sans</a>, which I thought was beautiful, but hazardous for programming because the similarities between zeroes and ohs and ones and els were too close for comfort.</p>
<p><span class="smallcaps">The snake image</span> on the cover page as well as the favicon was created by <a href="https://thenounproject.com/term/snake/1190118">Bakunetsu Kaito</a> from the Noun Project.</p>
<p><span class="smallcaps">This book</span> was generated by using <a href="https://github.com/rust-lang/mdBook">mdBook</a>, which is a free, open source command line tool and Rust crate to create books using Markdown (as by the CommonMark specification) files. It’s very similar to Gitbook but written in Rust.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
